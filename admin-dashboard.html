<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard -ASSAM HERITAGE</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top shadow-sm">
        <div class="container-fluid px-4">
            <a class="navbar-brand fw-bold" href="admin-dashboard.html">
                <i class="fas fa-crown text-warning me-2"></i> Admin Dashboard
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html"><i class="fas fa-home me-2"></i>Back to Store</a></li>
                    <li class="nav-item"><button class="btn btn-outline-light btn-sm" onclick="adminLogout()"><i class="fas fa-sign-out-alt me-2"></i>Logout</button></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid py-5">
        <!-- Stats Cards -->
        <div class="row mb-5">
            <div class="col-md-3 mb-3">
                <div class="card border-0 shadow-sm bg-gradient-primary text-white">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="text-white-50 mb-2">Total Orders</h6>
                                <h2 class="mb-0" id="totalOrders">0</h2>
                            </div>
                            <i class="fas fa-shopping-bag fa-3x opacity-25"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card border-0 shadow-sm bg-gradient-success text-white">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="text-white-50 mb-2">Total Revenue</h6>
                                <h2 class="mb-0" id="totalRevenue">â‚¹0</h2>
                            </div>
                            <i class="fas fa-rupee-sign fa-3x opacity-25"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card border-0 shadow-sm bg-gradient-info text-white">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="text-white-50 mb-2">Total Customers</h6>
                                <h2 class="mb-0" id="totalCustomers">0</h2>
                            </div>
                            <i class="fas fa-users fa-3x opacity-25"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card border-0 shadow-sm bg-gradient-warning text-white">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="text-white-50 mb-2">Products</h6>
                                <h2 class="mb-0" id="totalProducts">0</h2>
                            </div>
                            <i class="fas fa-box fa-3x opacity-25"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tabs -->
        <ul class="nav nav-tabs mb-4 border-bottom-2" role="tablist">
            <li class="nav-item">
                <a class="nav-link active fw-bold" href="#orders" data-bs-toggle="tab"><i class="fas fa-list me-2"></i>Orders</a>
            </li>
            <li class="nav-item">
                <a class="nav-link fw-bold" href="#customers" data-bs-toggle="tab"><i class="fas fa-users me-2"></i>Customers</a>
            </li>
            <li class="nav-item">
                <a class="nav-link fw-bold" href="#products" data-bs-toggle="tab"><i class="fas fa-box me-2"></i>Products</a>
            </li>
            <li class="nav-item">
                <a class="nav-link fw-bold" href="#vendors" data-bs-toggle="tab"><i class="fas fa-store me-2"></i>Vendors</a>
            </li>
            <li class="nav-item">
                <a class="nav-link fw-bold" href="#settings" data-bs-toggle="tab"><i class="fas fa-cog me-2"></i>Settings</a>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content">
            <!-- Orders Tab -->
            <div class="tab-pane fade show active" id="orders">
                <div class="card border-0 shadow-sm">
                    <div class="card-header bg-light border-0 d-flex justify-content-between align-items-center">
                        <h5 class="mb-0"><i class="fas fa-list me-2"></i>Recent Orders</h5>
                        <button class="btn btn-sm btn-primary" onclick="exportOrders()"><i class="fas fa-download me-2"></i>Export</button>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">
                                <thead class="table-light">
                                    <tr>
                                        <th>Order ID</th>
                                        <th>Customer</th>
                                        <th>Amount</th>
                                        <th>Status</th>
                                        <th>Date</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="ordersTable">
                                    <!-- Orders loaded by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Customers Tab -->
            <div class="tab-pane fade" id="customers">
                <div class="card shadow-sm">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Registered Customers</h5>
                        <button class="btn btn-sm btn-primary" onclick="exportCustomers()"><i class="fas fa-download me-2"></i>Export</button>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Phone</th>
                                        <th>Joined</th>
                                        <th>Orders</th>
                                        <th>Total Spent</th>
                                    </tr>
                                </thead>
                                <tbody id="customersTable">
                                    <!-- Customers loaded by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Products Tab -->
            <div class="tab-pane fade" id="products">
                <div class="card shadow-sm">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Product Inventory</h5>
                        <button class="btn btn-primary btn-sm" onclick="showAddProductForm()">
                            <i class="fas fa-plus"></i> Add Product
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Product</th>
                                        <th>Category</th>
                                        <th>Price</th>
                                        <th>Stock</th>
                                        <th>Rating</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="productsTable">
                                    <!-- Products loaded by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vendors Tab -->
            <div class="tab-pane fade" id="vendors">
                <div class="card shadow-sm">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Vendor Management</h5>
                        <button class="btn btn-primary btn-sm" onclick="showAddVendorForm()">
                            <i class="fas fa-plus"></i> Add Vendor
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Vendor Name</th>
                                        <th>Email</th>
                                        <th>Products</th>
                                        <th>Revenue</th>
                                        <th>Status</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="vendorsTable">
                                    <!-- Vendors loaded by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div class="tab-pane fade" id="settings">
                <div class="card shadow-sm">
                    <div class="card-header">
                        <h5 class="mb-0">Admin Settings</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6 class="mb-3">Store Settings</h6>
                                <div class="mb-3">
                                    <label class="form-label">Store Name</label>
                                    <input type="text" class="form-control" value="AssamHeritage" id="storeName">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Store Email</label>
                                    <input type="email" class="form-control" value="info@assamHeritage.com" id="storeEmail">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Store Phone</label>
                                    <input type="tel" class="form-control" value="+91 98765 43210" id="storePhone">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h6 class="mb-3">Shipping Settings</h6>
                                <div class="mb-3">
                                    <label class="form-label">Free Shipping Threshold</label>
                                    <input type="number" class="form-control" value="5000" id="freeShippingThreshold">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Standard Shipping Cost</label>
                                    <input type="number" class="form-control" value="100" id="shippingCost">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Tax Rate (%)</label>
                                    <input type="number" class="form-control" value="18" id="taxRate">
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-3" onclick="saveSettings()"><i class="fas fa-save me-2"></i>Save Settings</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const adminUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!adminUser || adminUser.role !== 'admin') {
                window.location.href = 'login.html';
                return;
            }
            loadDashboardStats();
            loadOrdersTable();
            loadCustomersTable();
            loadProductsTable();
            loadVendorsTable();
            loadSettings();
        });

        function loadDashboardStats() {
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const products = getProducts();

            const totalRevenue = orders.reduce((sum, order) => sum + order.total, 0);

            document.getElementById('totalOrders').textContent = orders.length;
            document.getElementById('totalRevenue').textContent = 'â‚¹' + totalRevenue.toLocaleString();
            document.getElementById('totalCustomers').textContent = users.filter(u => u.role === 'customer').length;
            document.getElementById('totalProducts').textContent = products.length;
        }

        function loadOrdersTable() {
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const users = JSON.parse(localStorage.getItem('users')) || [];
            
            const tbody = document.getElementById('ordersTable');
            tbody.innerHTML = orders.slice(-10).reverse().map(order => {
                const user = users.find(u => u.id === order.userId);
                return `
                    <tr>
                        <td><strong>#${order.id}</strong></td>
                        <td>${user ? user.name : 'Unknown'}</td>
                        <td>â‚¹${order.total.toLocaleString()}</td>
                        <td><span class="badge bg-success">${order.status}</span></td>
                        <td>${new Date(order.date).toLocaleDateString()}</td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary" onclick="viewOrder(${order.id})">View</button>
                            <select class="form-select form-select-sm d-inline w-auto" onchange="updateOrderStatus(${order.id}, this.value)">
                                <option value="Processing">Processing</option>
                                <option value="Shipped">Shipped</option>
                                <option value="Delivered">Delivered</option>
                                <option value="Cancelled">Cancelled</option>
                            </select>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function loadCustomersTable() {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            
            const tbody = document.getElementById('customersTable');
            tbody.innerHTML = users.filter(u => u.role === 'customer').map(user => {
                const userOrders = orders.filter(o => o.userId === user.id);
                const totalSpent = userOrders.reduce((sum, o) => sum + o.total, 0);
                return `
                    <tr>
                        <td>${user.name}</td>
                        <td>${user.email}</td>
                        <td>${user.phone || 'N/A'}</td>
                        <td>${new Date(user.createdAt).toLocaleDateString()}</td>
                        <td><span class="badge bg-info">${userOrders.length}</span></td>
                        <td>â‚¹${totalSpent.toLocaleString()}</td>
                    </tr>
                `;
            }).join('');
        }

        function loadProductsTable() {
            const products = getProducts();
            const tbody = document.getElementById('productsTable');
            tbody.innerHTML = products.map(product => `
                <tr>
                    <td>${product.name}</td>
                    <td><span class="badge bg-secondary">${product.category}</span></td>
                    <td>â‚¹${product.price.toLocaleString()}</td>
                    <td><span class="badge bg-warning">${product.stock || 50}</span></td>
                    <td><i class="fas fa-star text-warning"></i> ${product.rating}</td>
                    <td>
                        <button class="btn btn-sm btn-outline-primary" onclick="editProduct(${product.id})">Edit</button>
                        <button class="btn btn-sm btn-outline-danger" onclick="deleteProduct(${product.id})">Delete</button>
                    </td>
                </tr>
            `).join('');
        }

        function loadVendorsTable() {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const tbody = document.getElementById('vendorsTable');
            tbody.innerHTML = users.filter(u => u.role === 'vendor').map(vendor => {
                const vendorProducts = JSON.parse(localStorage.getItem('vendorProducts_' + vendor.id)) || [];
                const orders = JSON.parse(localStorage.getItem('orders')) || [];
                const vendorOrders = orders.filter(o => {
                    return o.items.some(item => {
                        const product = getProducts().find(p => p.id === item.productId);
                        return product && product.vendorId === vendor.id;
                    });
                });
                const totalRevenue = vendorOrders.reduce((sum, order) => sum + order.total, 0);
                const status = vendor.status || 'active';

                return `
                    <tr>
                        <td>${vendor.name}</td>
                        <td>${vendor.email}</td>
                        <td><span class="badge bg-info">${vendorProducts.length}</span></td>
                        <td>â‚¹${totalRevenue.toLocaleString('en-IN', {maximumFractionDigits: 0})}</td>
                        <td><span class="badge bg-${status === 'active' ? 'success' : 'danger'}">${status.charAt(0).toUpperCase() + status.slice(1)}</span></td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary" onclick="viewVendor(${vendor.id})">View</button>
                            <button class="btn btn-sm btn-outline-${status === 'active' ? 'danger' : 'success'}" onclick="${status === 'active' ? 'deactivateVendor' : 'activateVendor'}(${vendor.id})">${status === 'active' ? 'Deactivate' : 'Activate'}</button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function updateOrderStatus(orderId, status) {
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const order = orders.find(o => o.id === orderId);
            if (order) {
                order.status = status;
                localStorage.setItem('orders', JSON.stringify(orders));
                showNotification(`Order status updated to ${status}`, 'success');
                loadOrdersTable();
            }
        }

        function saveSettings() {
            const settings = {
                storeName: document.getElementById('storeName').value,
                storeEmail: document.getElementById('storeEmail').value,
                storePhone: document.getElementById('storePhone').value,
                freeShippingThreshold: parseFloat(document.getElementById('freeShippingThreshold').value),
                shippingCost: parseFloat(document.getElementById('shippingCost').value),
                taxRate: parseFloat(document.getElementById('taxRate').value),
            };

            // Validate settings
            if (settings.freeShippingThreshold < 0 || settings.shippingCost < 0 || settings.taxRate < 0) {
                showNotification('Please enter valid positive values', 'danger');
                return;
            }

            localStorage.setItem('storeSettings', JSON.stringify(settings));
            showNotification('Settings saved successfully!', 'success');
        }

        // Load settings on page load
        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('storeSettings')) || {};
            document.getElementById('storeName').value = settings.storeName || 'AssamHeritage';
            document.getElementById('storeEmail').value = settings.storeEmail || 'info@assamHeritage.com';
            document.getElementById('storePhone').value = settings.storePhone || '+91 98765 43210';
            document.getElementById('freeShippingThreshold').value = settings.freeShippingThreshold || 5000;
            document.getElementById('shippingCost').value = settings.shippingCost || 100;
            document.getElementById('taxRate').value = settings.taxRate || 18;
        }

        function exportOrders() {
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const csvContent = [
                ['Order ID', 'Customer', 'Email', 'Amount', 'Status', 'Date', 'Items'],
                ...orders.map(order => {
                    const user = JSON.parse(localStorage.getItem('users')).find(u => u.id === order.userId);
                    const items = order.items.map(item => `${item.name}(${item.quantity})`).join('; ');
                    return [
                        order.id,
                        user ? user.name : 'Unknown',
                        user ? user.email : 'N/A',
                        order.total,
                        order.status,
                        new Date(order.date).toLocaleDateString(),
                        items
                    ];
                })
            ].map(row => row.map(cell => `"${cell}"`).join(',')).join('\n');

            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'orders_export.csv';
            a.click();
            window.URL.revokeObjectURL(url);
            showNotification('Orders exported successfully!', 'success');
        }

        function exportCustomers() {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const customers = users.filter(u => u.role === 'customer');

            const csvContent = [
                ['Name', 'Email', 'Phone', 'Joined', 'Orders', 'Total Spent'],
                ...customers.map(user => {
                    const userOrders = orders.filter(o => o.userId === user.id);
                    const totalSpent = userOrders.reduce((sum, o) => sum + o.total, 0);
                    return [
                        user.name,
                        user.email,
                        user.phone || 'N/A',
                        new Date(user.createdAt).toLocaleDateString(),
                        userOrders.length,
                        totalSpent
                    ];
                })
            ].map(row => row.map(cell => `"${cell}"`).join(',')).join('\n');

            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'customers_export.csv';
            a.click();
            window.URL.revokeObjectURL(url);
            showNotification('Customers exported successfully!', 'success');
        }

        function showAddProductForm() {
            // Create a modal for adding products
            const modalHTML = `
                <div class="modal fade" id="addProductModal" tabindex="-1">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Add New Product</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <form id="addProductForm">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label class="form-label">Product Name</label>
                                                <input type="text" class="form-control" id="productName" required>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Category</label>
                                                <select class="form-control" id="productCategory" required>
                                                    <option value="">Select Category</option>
                                                    <option value="Sarees">Sarees</option>
                                                    <option value="Mekhela Chador">Mekhela Chador</option>
                                                    <option value="Fabrics">Fabrics</option>
                                                    <option value="Accessories">Accessories</option>
                                                    <option value="Shawls">Shawls</option>
                                                    <option value="Dupattas">Dupattas</option>
                                                    <option value="Bed Linens">Bed Linens</option>
                                                    <option value="Ethnic Wear">Ethnic Wear</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Price (â‚¹)</label>
                                                <input type="number" class="form-control" id="productPrice" required>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label class="form-label">Image URL</label>
                                                <input type="url" class="form-control" id="productImage" required>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Description</label>
                                                <textarea class="form-control" id="productDescription" rows="3" required></textarea>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Stock Quantity</label>
                                                <input type="number" class="form-control" id="productStock" value="50" required>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-primary" onclick="addNewProduct()">Add Product</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            const modal = new bootstrap.Modal(document.getElementById('addProductModal'));
            modal.show();
        }

        function addNewProduct() {
            const name = document.getElementById('productName').value;
            const category = document.getElementById('productCategory').value;
            const price = parseFloat(document.getElementById('productPrice').value);
            const image = document.getElementById('productImage').value;
            const description = document.getElementById('productDescription').value;
            const stock = parseInt(document.getElementById('productStock').value);

            if (!name || !category || !price || !image || !description) {
                showNotification('Please fill all required fields', 'danger');
                return;
            }

            const newProduct = {
                id: Date.now(),
                name,
                category,
                price,
                image,
                description,
                rating: 4.5,
                reviews: 0,
                stock
            };

            // Add to default products (admin products)
            const products = JSON.parse(localStorage.getItem('adminProducts')) || [];
            products.push(newProduct);
            localStorage.setItem('adminProducts', JSON.stringify(products));

            showNotification('Product added successfully!', 'success');
            const modal = bootstrap.Modal.getInstance(document.getElementById('addProductModal'));
            modal.hide();
            loadProductsTable();
        }

        function showAddVendorForm() {
            // Create a modal for adding vendors
            const modalHTML = `
                <div class="modal fade" id="addVendorModal" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Add New Vendor</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <form id="addVendorForm">
                                    <div class="mb-3">
                                        <label class="form-label">Vendor Name</label>
                                        <input type="text" class="form-control" id="vendorName" required>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Email</label>
                                        <input type="email" class="form-control" id="vendorEmail" required>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Phone</label>
                                        <input type="tel" class="form-control" id="vendorPhone">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Password</label>
                                        <input type="password" class="form-control" id="vendorPassword" required>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-primary" onclick="addNewVendor()">Add Vendor</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            const modal = new bootstrap.Modal(document.getElementById('addVendorModal'));
            modal.show();
        }

        function addNewVendor() {
            const name = document.getElementById('vendorName').value;
            const email = document.getElementById('vendorEmail').value;
            const phone = document.getElementById('vendorPhone').value;
            const password = document.getElementById('vendorPassword').value;

            if (!name || !email || !password) {
                showNotification('Please fill all required fields', 'danger');
                return;
            }

            const users = JSON.parse(localStorage.getItem('users')) || [];
            if (users.some(u => u.email === email)) {
                showNotification('Email already exists', 'danger');
                return;
            }

            const newVendor = {
                id: Date.now(),
                name,
                email,
                phone,
                password,
                role: 'vendor',
                status: 'active',
                createdAt: new Date().toISOString()
            };

            users.push(newVendor);
            localStorage.setItem('users', JSON.stringify(users));

            showNotification('Vendor added successfully!', 'success');
            const modal = bootstrap.Modal.getInstance(document.getElementById('addVendorModal'));
            modal.hide();
            loadVendorsTable();
        }

        function adminLogout() {
            localStorage.removeItem('currentUser');
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>
